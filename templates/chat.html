{% extends "base.html" %}
{% block title %}Chat{% endblock %}
{% block content %}
<div class="container-fluid p-4">
    <h2>Chat</h2>
    <div id="chat-messages" style="height: 400px; overflow-y: auto; border: 1px solid #ddd; padding: 1rem; margin-bottom: 1rem;"></div>
    <div class="input-group">
        <input type="text" id="message-input" class="form-control" placeholder="Digite sua mensagem...">
        <button class="btn btn-primary" onclick="sendMessage()">Enviar</button>
    </div>
</div>
<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
<script>
const socket = io();
socket.on('new_message', (data) => {
    const msgDiv = document.getElementById('chat-messages');
    msgDiv.innerHTML += `<div><strong>${data.sender.username}:</strong> ${data.content}</div>`;
});
function sendMessage() {
    const input = document.getElementById('message-input');
    socket.emit('send_message', {room: 'general', message: input.value});
    input.value = '';
}
</script>
{% endblock %}
